function showCheckboxes(e){var t=document.getElementById(e+"_checkboxes");expanded?(t.style.display="none",expanded=!1):(t.style.display="block",expanded=!0)}function customFilterUIAction(e){jQuery(e).is(":checked")?(jQuery("#mo_ldap_cloud_user_attributes").slideUp(),jQuery("#user_div").slideDown(),jQuery("#username_attribute_id").attr("required",!1),jQuery("#search_filter").attr("required",!0),jQuery("#mo_ldap_cloud_custom_search_filter_notice , #groupErrorMessage").hide(),jQuery("[id='mo_ldap_cloud_user_attributes']").hide(),jQuery("[id='mo_ldap_cloud_search_filter_div']").show(),jQuery("#mo_ldap_cloud_custom_filter_notice").show(),jQuery("#search_filter").css("width","100%")):jQuery(e).is(":checked")||(jQuery("#mo_ldap_cloud_user_attributes").slideDown(),jQuery("#user_div").slideUp(),jQuery("#search_filter").attr("required",!1),jQuery("#username_attribute_id").attr("required",!0),jQuery("#search_filter").css("width","140%"),jQuery("#mo_ldap_cloud_custom_search_filter_notice, #groupErrorMessage").show(),jQuery("[id='mo_ldap_cloud_user_attributes']").show(),jQuery("#mo_ldap_cloud_custom_filter_notice").hide(),jQuery("[id='mo_ldap_cloud_search_filter_div']").hide())}function togglePasswordVisibility(e,t,r){const l=document.querySelector("#"+t),_=document.querySelector("#"+e);var o=_.getAttribute("type");o="password"===o?"text":"password",_.setAttribute("type",o),visible_path=r+"eye.webp",invisible_path=r+"eye-slash.webp",l.src===visible_path?l.src=invisible_path:l.src=visible_path}function showSelectedAttribute(){if(selectedUserAttr=jQuery(".mo_ldap_no_checkbox_user:checked").length,attrs=jQuery(".mo_ldap_no_checkbox_user:checked"),html="",!(selectedUserAttr>1))return 1==selectedUserAttr?"<div><span class='selectedUserAttrClass' id='"+attrs[0].id+"'>"+attrs[0].id+"</span></div>":"<div><span class='selectedUserAttrClass' id='sAMAccountName' >sAMAccountName</span></div>";for(i=0;i<attrs.length;++i)html+="<div><span class='selectedUserAttrClass' id='"+attrs[i].id+"'>"+attrs[i].id+"</span></div>";return html}function createUserAttributesForFilter(){for(selectedUserAttr=jQuery(".mo_ldap_no_checkbox_user:checked").length,attrs=jQuery(".mo_ldap_no_checkbox_user:checked"),selectedExtraUserAttr=jQuery("#mo_ldap_cloud_extra_user_attributes").val(),e="",attrLength=attrs.length,i=0;i<attrLength;++i)"Extra attributes"==attrs[i].id&&(attrLength-=1,selectedUserAttr-=1);if(selectedUserAttr>1)for(i=0;i<attrLength;++i)"Extra attributes"!=attrs[i].id&&(e+="("+attrs[i].id+"=?)");else{if(void 0===attrs[0])return"(sAMAccountName=?)";if(0==selectedUserAttr)e=e;else{if("Extra attributes"==attrs[0].id)return"(sAMAccountName=?)";var e="("+attrs[0].id+"=?)"}}return e}function createExtraUserAttributesForFilter(){if(selectedExtraUserAttr=jQuery("#mo_ldap_cloud_extra_user_attributes").val(),selectedUserAttr=jQuery(".mo_ldap_no_checkbox_user:checked").length,""==selectedExtraUserAttr&&0==selectedUserAttr)return selectedExtraUserAttr;if(""==selectedExtraUserAttr)return selectedExtraUserAttr;if(selectedExtraUserAttr.includes(",")?(selectedExtraUserAttr=jQuery("#mo_ldap_cloud_extra_user_attributes").val().split(","),extrAttrLength=selectedExtraUserAttr.length):extrAttrLength=1,filters="",extrAttrLength>1)for(i=0;i<extrAttrLength;++i)"Extra attributes"!=selectedExtraUserAttr[i]&&(filters+="("+selectedExtraUserAttr[i]+"=?)");else"Extra attributes"!=selectedExtraUserAttr[i]&&(filters="("+selectedExtraUserAttr+"=?)");return filters}function createFinalUserAttribute(){return filter="",userAttributesFilter=createUserAttributesForFilter(),extraUserAttributeFilter=createExtraUserAttributesForFilter(),selectedExtraUserAttr=jQuery("#mo_ldap_cloud_extra_user_attributes").val(),userAttributesFilterLength=userAttributesFilter.split(")").length-1,extraUserAttributeFilterLength=extraUserAttributeFilter.split(")").length-1,0==userAttributesFilterLength&&1==extraUserAttributeFilterLength&&""!=selectedExtraUserAttr?extraUserAttributeFilter:(userAttributesFilterLength>1||extraUserAttributeFilterLength>=1?filter="(|"+userAttributesFilter+extraUserAttributeFilter+")":1==userAttributesFilterLength&&0==extraUserAttributeFilterLength?filter=userAttributesFilter:userAttributesFilterLength>=1&&0==extraUserAttributeFilterLength?filter="(|"+userAttributesFilter+")":filter=userAttributesFilter+extraUserAttributeFilter,filter)}function createSearchFilter(e){return selectedUserAttr=jQuery(".mo_ldap_no_checkbox_user:checked").length,selectedGroupAttr=jQuery(".mo_ldap_no_checkbox_group:checked").length,attrs=jQuery(".mo_ldap_no_checkbox_user:checked"),basicFilter="",selectedUserAttr>=1&&selectedGroupAttr>=1?basicFilter="(&(objectClass=*)(&"+createFinalUserAttribute()+"))":0===selectedUserAttr&&selectedGroupAttr>=1?basicFilter="(&(objectClass=*)(&"+createFinalUserAttribute()+"))":0==selectedGroupAttr&&(basicFilter="(&(objectClass=*)"+createFinalUserAttribute()+")"),basicFilter}function moCloudFilterCheck(){var e=document.getElementById("mo_ldap_cloud_search_filter_check").checked,t=document.getElementById("user_checkboxes");if(!1===e){var r=t.querySelectorAll('input[type="checkbox"]:checked');0==r.length?t.querySelectorAll('input[type="checkbox"]')[0].setAttribute("required",""):t.querySelectorAll('input[type="checkbox"]')[0].removeAttribute("required")}else t.querySelectorAll('input[type="checkbox"]')[0].removeAttribute("required")}function mo_ldap_cloud_popup_card_clicked(e,t){var r=e.getAttribute("data-id"),l=document.getElementById(r);document.getElementById("mo_ldap_cloud_query").value=t;let _=document.getElementsByClassName("mo_ldap_cloud_popup_box");Array.from(_).forEach(e=>{e.classList.add("mo_ldap_cloud_d_none")});let o=document.getElementById("mo_ldap_cloud_overlay");o&&(o.classList.remove("mo_ldap_cloud_d_none"),o.classList.add("mo_ldap_cloud_d_block")),l.classList.remove("mo_ldap_cloud_d_none")}function mo_ldap_cloud_popup_card_cancel_remove(e){var t=e.getAttribute("data-id"),r=document.getElementById(t);let l=document.getElementById("mo_ldap_cloud_overlay");l&&(l.classList.add("mo_ldap_cloud_d_none"),l.classList.remove("mo_ldap_cloud_d_block")),r.classList.add("mo_ldap_cloud_d_none")}function showFAQbox(e){e.parentNode.click()}function showCustomDirectoryInputField(){var e=document.getElementById("mo_ldap_directory_server_value"),t=e.value;document.getElementById("mo_ldap_cloud_show_custom_directory").style.display=null!=t&&"other"==t?"block":"none"}function showOtherProductsPages(){var e=document.getElementById("mo_ldap_cloud_other_products_navbar"),t={};null!=e&&(t=e.getElementsByClassName("mo_ldap_cloud_other_products_opt"));for(var r=0;r<t.length;r++)t[r].addEventListener("click",function(){var e=document.getElementsByClassName("mo_ldap_cloud_other_products_nav_checked"),t=document.getElementsByClassName("mo_ldap_cloud_other_current_product");e.length>0&&(e[0].className=e[0].className.replace(" mo_ldap_cloud_other_products_nav_checked","")),t.length>0&&(t[0].className=t[0].className.replace(" mo_ldap_cloud_other_current_product"," mo_ldap_cloud_other_product"));var r=this.getAttribute("data-id"),l=document.getElementById(r);l.className=l.className.replace(" mo_ldap_cloud_other_product"," mo_ldap_cloud_other_current_product"),this.className+=" mo_ldap_cloud_other_products_nav_checked"})}function mo_ldap_cloud_display_setup_call_details(){var e=document.getElementById("mo_ldap_cloud_setup_call_details_div"),t=document.getElementById("mo_ldap_cloud_setup_call");t.checked?e.classList.remove("mo_ldap_cloud_d_none"):e.classList.add("mo_ldap_cloud_d_none")}jQuery(document).ready(function(){showOtherProductsPages(),jQuery("#mo_ldap_cloud_query_phone").intlTelInput(),jQuery(".mo_ldap_cloud_faq_box").click(function(e){let t=e.target.parentElement.getElementsByClassName("mo_ldap_cloud_answer_section")[0],r=e.target.parentElement.getElementsByClassName("mo_ldap_cloud_plus_icon")[0];t&&r&&(t.style.maxHeight?(t.style.maxHeight=null,r.innerHTML="+"):(t.style.maxHeight=t.scrollHeight+"px",r.innerHTML="-"))}),jQuery("#mo_ldap_cloud_documentation_dropdown").click(function(e){let t=document.getElementById("mo_ldap_cloud_absolute_documentation_box");t.style.maxHeight?(t.style.maxHeight=null,t.style.boxShadow="0",document.getElementById("mo_ldap_cloud_doc_dropdown").style.transform="rotate(0deg)"):(t.style.maxHeight=t.scrollHeight+"px",t.style.boxShadow="0px 0px 20px 0px rgba(48, 48, 48, 0.29)",document.getElementById("mo_ldap_cloud_doc_dropdown").style.transform="rotate(180deg)")}),jQuery(document).mouseup(function(e){var t=jQuery("#mo_ldap_cloud_documentation_section");if(!t.is(e.target)&&0===t.has(e.target).length){let e=document.getElementById("mo_ldap_cloud_absolute_documentation_box");e&&(e.style.maxHeight=null,e.style.boxShadow="0"),document.getElementById("mo_ldap_cloud_doc_dropdown")&&"rotate(180deg)"==document.getElementById("mo_ldap_cloud_doc_dropdown").style.transform&&(document.getElementById("mo_ldap_cloud_doc_dropdown").style.transform="rotate(0deg)")}}),jQuery("#auth_help_cloud").click(function(){jQuery("#auth_troubleshoot_cloud").toggle()}),jQuery("#conn_help_cloud").click(function(){jQuery("#conn_troubleshoot_cloud").toggle()}),jQuery("#toggle_am_content").click(function(){jQuery("#show_am_content").toggle()}),jQuery("#help_mcrypt_warning_title").click(function(){jQuery("#help_mcrypt_warning_desc").slideToggle(400)}),jQuery("#help_ldap_title_cloud").click(function(){jQuery("#help_ldap_desc_cloud").slideToggle(400)}),jQuery("#help_ldaps_title_cloud").click(function(){jQuery("#help_ldaps_desc_cloud").slideToggle(400)}),jQuery("#help_ping_title_cloud").click(function(){jQuery("#help_ping_desc_cloud").slideToggle(400)}),jQuery("#help_invaliddn_title_cloud").click(function(){jQuery("#help_invaliddn_desc_cloud").slideToggle(400)}),jQuery("#help_invalidsf_title_cloud").click(function(){jQuery("#help_invalidsf_desc_cloud").slideToggle(400)}),jQuery("#help_seracccre_title_cloud").click(function(){jQuery("#help_seracccre_desc_cloud").slideToggle(400)}),jQuery("#help_sbase_title_cloud").click(function(){jQuery("#help_sbase_desc_cloud").slideToggle(400)}),jQuery("#help_sfilter_title_cloud").click(function(){jQuery("#help_sfilter_desc_cloud").slideToggle(400)}),jQuery("#help_ou_title_cloud").click(function(){jQuery("#help_ou_desc_cloud").slideToggle(400)}),jQuery("#help_loginusing_title_cloud").click(function(){jQuery("#help_loginusing_desc_cloud").slideToggle(400)}),jQuery("#help_diffdist_title_cloud").click(function(){jQuery("#help_diffdist_desc_cloud").slideToggle(400)}),jQuery("#help_miniorange_gateway_title_cloud").click(function(){jQuery("#help_miniorange_gateway_desc_cloud").slideToggle(400)});var e=document.getElementById("user_checkboxes");e&&(e.style.display="block"),jQuery("input[value='extraUserAttribute']").is(":checked")&&(jQuery("#mo_ldap_cloud_extra_user_attributes,#mo_ldap_cloud_extra_user_attribute_div").show(),jQuery("#mo_ldap_cloud_extra_user_attributes").prop("required",!0)),jQuery("#save_search_base").on("click",function(){jQuery("#save_search_base").parents("form").find("input[type='submit']").click()}),customFilterUIAction(jQuery("#mo_ldap_cloud_search_filter_check")),jQuery("#mo_ldap_cloud_extra_user_attributes").on("change",function(){jQuery("#mo_ldap_cloud_extra_user_attributes").val().endsWith(",")&&(newVal=jQuery("#mo_ldap_cloud_extra_user_attributes").val().slice(0,-1),jQuery("#mo_ldap_cloud_extra_user_attributes").val(newVal)),searchFilter=createSearchFilter(""),jQuery("#search_filter").val(searchFilter)}),jQuery(".mo_checkbox_ldap_user").on("change",function(){showSelectedAttributeElems=showSelectedAttribute(),jQuery("#mo_ldap_cloud_search_filter_check").is(":checked")||(jQuery("input[value='extraUserAttribute']").is(":checked")&&(jQuery("#mo_ldap_cloud_extra_user_attributes, #mo_ldap_cloud_extra_user_attribute_div").show(),jQuery("#mo_ldap_cloud_extra_user_attributes").prop("required",!0)),jQuery("input[value='extraUserAttribute']").is(":checked")||(jQuery("#mo_ldap_cloud_extra_user_attributes, #mo_ldap_cloud_extra_user_attribute_div").hide(),jQuery("#mo_ldap_cloud_extra_user_attributes").prop("required",!1),jQuery("#mo_ldap_cloud_extra_user_attributes").val("")),attributeID=jQuery(this).find(".mo_ldap_no_checkbox_user").attr("id"),jQuery("#search_filter").empty(),searchFilter=createSearchFilter(attributeID),jQuery("#search_filter").val(searchFilter))}),jQuery(".mo_checkbox_ldap_group").on("change",function(){jQuery("#mo_ldap_cloud_search_filter_check").is(":checked")||(attributeID=jQuery(this).find(".mo_ldap_no_checkbox_group").attr("id"),jQuery("#search_filter").empty(),searchFilter=createSearchFilter(attributeID),jQuery("#search_filter").val(searchFilter))}),jQuery("#mo_ldap_cloud_search_filter_check").click(function(){customFilterUIAction(this)});var t=new Date,r=t.getHours(),l=t.getMinutes(),_=t.getMonth()+1,o=t.getDate(),c=t.getFullYear();_<10&&(_="0"+_.toString()),o<10&&(o="0"+o.toString());var u=c+"-"+_+"-"+o;jQuery("#mo_ldap_cloud_datepicker").attr("value",u),jQuery("#mo_ldap_cloud_datepicker").attr("min",u),r<10&&(r="0"+r),l<10&&(l="0"+l),jQuery('input[type="time"][value="now"]').each(function(){jQuery("#mo_ldap_cloud_timepicker").attr({value:r+":"+l}),jQuery("#mo_ldap_cloud_timepicker").attr("min",r+":"+l),jQuery("#mo_ldap_cloud_datepicker").change(function(){var e=jQuery("#mo_ldap_cloud_datepicker").val();e===u?(jQuery("#mo_ldap_cloud_timepicker").attr({value:r+":"+l}),jQuery("#mo_ldap_cloud_timepicker").attr("min",r+":"+l)):(jQuery("#mo_ldap_cloud_timepicker").attr({value:"00:00"}),jQuery("#mo_ldap_cloud_timepicker").removeAttr("min"))})})}),document.addEventListener("mouseup",function(e){let t=document.getElementById("mo_ldap_cloud_overlay");t&&(t.classList.remove("mo_ldap_cloud_d_block"),t.classList.add("mo_ldap_cloud_d_none"));let r=document.getElementsByClassName("mo_ldap_cloud_popup_box");Array.from(r).forEach(r=>{r.classList.contains("mo_ldap_cloud_d_none")||(null==r||r.contains(e.target)?r.contains(e.target)&&t&&(t.classList.remove("mo_ldap_cloud_d_none"),t.classList.add("mo_ldap_cloud_d_block")):r.classList.add("mo_ldap_cloud_d_none"))})});